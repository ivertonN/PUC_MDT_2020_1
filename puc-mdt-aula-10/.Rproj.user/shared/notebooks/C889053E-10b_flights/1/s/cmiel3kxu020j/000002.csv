"0","map_flights <-"
"0","  leaflet( options = leafletOptions( minZoom = 1) ) %>%"
"0","  setMaxBounds( lng1 = -180"
"0","                , lat1 = -89.98155760646617"
"0","                , lng2 = 180"
"0","                , lat2 = 89.99346179538875 ) %>%"
"0","    addProviderTiles(providers$CartoDB.DarkMatter) %>%"
"0","    addPolygons(data = maps::map(""usa"", plot = F), fillColor = ""blue"","
"0","  opacity = .1)"
"0",""
"0","#Paleta de cores utilizada para edge "
"0","col_1 <- adjustcolor(""orange red"", alpha=0.4)"
"0","col_2 <- adjustcolor(""orange"", alpha=0.4)"
"0","edge_pal <- colorRampPalette(c(col_1, col_2), alpha = TRUE)"
"0","edge_col <- edge_pal(100)"
"0",""
"0","for(i in 1:nrow(df_flights_grouped))  {"
"0","  edge_ind <- df_flights_grouped %>% pull(curved_line_color_ind) %>% `[[`(i)"
"0","  curved_line <- df_flights_grouped %>% pull(curved_line) %>% `[[`(i)"
"0","  "
"0","  #adiciona cada linha curva"
"0","  map_flights <- addPolylines(map_flights, data = curved_line"
"0","                              , color = edge_col[edge_ind]"
"0","                              , weight = edge_ind/30"
"0","                              , opacity = 1)"
"0","}"
"0",""
"0","for(i in 1:nrow(df_airports_grouped)) {"
"0","  group_id <- df_airports_grouped %>% pull(group) %>% `[[`(i)"
"0","  "
"0","  map_flights <-  addCircles(map_flights, data = df_airports_grouped[i,]"
"0","                             , lng = ~longitude"
"0","                             , lat = ~latitude"
"0","                             , group = as.character(group_id)"
"0","                             , color = ~group_pal(group_id)"
"0","                             , popup = str_glue(""<b>Lat:</b> {df_airports_grouped[i,]$latitude} <br/>"
"0","                <b>Lon:</b> {df_airports_grouped[i,]$longitude} <br/>"
"0","                <b>Airport:</b> {df_airports_grouped[i,]$Label} <br/>"")"
"0","                             , weight = ~sqrt(sqrt(centrality))*10"
"0","                             , opacity = .8"
"0","                             ,highlightOptions = highlightOptions(color = ""yellow"", bringToFront = TRUE))"
"0","}"
"0",""
"0","map_flights"
